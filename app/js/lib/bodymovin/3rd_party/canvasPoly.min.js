function BM_CanvasRenderingContext2D(e){this.renderer=e}void 0===CanvasRenderingContext2D.prototype.ellipse&&(CanvasRenderingContext2D.prototype.ellipse=function(e,t,r,s,n,a,o,i){this.save(),this.translate(e,t),this.rotate(n),this.scale(r,s),this.arc(0,0,1,a,o,i),this.restore()});var BM_Path2D;!function(){function e(e){if(this.ops_=[],void 0!==e)if("string"==typeof e)try{this.ops_=parser.parse(e)}catch(e){}else{if(!e.hasOwnProperty("ops_"))throw"Error: "+typeof e+"is not a valid argument to Path";this.ops_=e.ops_.slice(0)}}function t(e){return function(){var t,r=arguments.length,s=[];for(t=0;t<r;t+=1)s.push(arguments[t]);this.ops_.push({type:e,args:s})}}for(var r=CanvasRenderingContext2D.prototype,s=BM_CanvasRenderingContext2D.prototype,n=["closePath","moveTo","lineTo","quadraticCurveTo","bezierCurveTo","rect","arc","arcTo","ellipse"],a=0;a<n.length;a++){var o=n[a];e.prototype[o]=t(o)}e.prototype.addPath=function(e,t){var r=!1;!t||1==t[0]&&0===t[1]&&0===t[2]&&1==t[3]&&0===t[4]&&0===t[5]||(r=!0,this.ops_.push({type:"save",args:[]}),this.ops_.push({type:"transform",args:[t[0],t[1],t[2],t[3],t[4],t[5]]})),this.ops_=this.ops_.concat(e.ops_),r&&this.ops_.push({type:"restore",args:[]})};var i=r.fill,p=r.stroke,h=r.clip;s.fill=function(t){if(t instanceof e){this.renderer.canvasContext.beginPath();for(var r=0,s=t.ops_.length;r<s;r++){var n=t.ops_[r];"transform"==n.type?this.renderer.ctxTransform(n.args):"save"==n.type?this.renderer.save():"restore"==n.type?this.renderer.restore():this.renderer.canvasContext[n.type].apply(this.renderer.canvasContext,n.args)}s=arguments.length;var a=[];for(r=1;r<s;r+=1)a.push(arguments[r]);i.apply(this.renderer.canvasContext,a)}else i.apply(this.renderer.canvasContext,arguments)},s.stroke=function(t){if(t instanceof e){this.renderer.canvasContext.beginPath();for(var r=0,s=t.ops_.length;r<s;r++){var n=t.ops_[r];this.renderer.canvasContext[n.type].apply(this.renderer.canvasContext,n.args)}p.call(this.renderer.canvasContext)}else p.call(this.renderer.canvasContext)},s.clip=function(t){if(t instanceof e){this.renderer.canvasContext.beginPath();for(var r=0,s=t.ops_.length;r<s;r++){var n=t.ops_[r];this.renderer.canvasContext[n.type].apply(this.renderer.canvasContext,n.args)}s=arguments.length;var a=[];for(r=1;r<s;r+=1)a.push(arguments[r]);h.apply(this.renderer.canvasContext,a)}else h.apply(this.renderer.canvasContext,arguments)},BM_Path2D=e}();