function IShapeElement(t,e,s,r,i){this.shapes=[],this.shapesData=t.shapes,this.stylesList=[],this.viewData=[],this.shapeModifiers=[],this._parent.constructor.call(this,t,e,s,r,i)}createElement(SVGBaseElement,IShapeElement),IShapeElement.prototype.lcEnum={1:"butt",2:"round",3:"butt"},IShapeElement.prototype.ljEnum={1:"miter",2:"round",3:"butt"},IShapeElement.prototype.buildExpressionInterface=function(){},IShapeElement.prototype.createElements=function(){this._parent.createElements.call(this),this.searchShapes(this.shapesData,this.viewData,this.layerElement,this.dynamicProperties,0),this.data.hd&&!this.data.td||styleUnselectableDiv(this.layerElement)},IShapeElement.prototype.setGradientData=function(t,e,s){var r,i="gr_"+randomString(10);r=1===e.t?document.createElementNS(svgNS,"linearGradient"):document.createElementNS(svgNS,"radialGradient"),r.setAttribute("id",i),r.setAttribute("spreadMethod","pad"),r.setAttribute("gradientUnits","userSpaceOnUse");var a,o,l,h=[];for(l=4*e.g.p,o=0;o<l;o+=4)a=document.createElementNS(svgNS,"stop"),r.appendChild(a),h.push(a);t.setAttribute("gf"===e.ty?"fill":"stroke","url(#"+i+")"),this.globalData.defs.appendChild(r),s.gf=r,s.cst=h},IShapeElement.prototype.setGradientOpacity=function(t,e,s){if(t.g.k.k[0].s&&t.g.k.k[0].s.length>4*t.g.p||t.g.k.k.length>4*t.g.p){var r,i,a,o,l=document.createElementNS(svgNS,"mask"),h=document.createElementNS(svgNS,"path");l.appendChild(h);var n="op_"+randomString(10),p="mk_"+randomString(10);l.setAttribute("id",p),r=1===t.t?document.createElementNS(svgNS,"linearGradient"):document.createElementNS(svgNS,"radialGradient"),r.setAttribute("id",n),r.setAttribute("spreadMethod","pad"),r.setAttribute("gradientUnits","userSpaceOnUse"),o=t.g.k.k[0].s?t.g.k.k[0].s.length:t.g.k.k.length;var d=[];for(a=4*t.g.p;a<o;a+=2)i=document.createElementNS(svgNS,"stop"),i.setAttribute("stop-color","rgb(255,255,255)"),r.appendChild(i),d.push(i);return h.setAttribute("gf"===t.ty?"fill":"stroke","url(#"+n+")"),this.globalData.defs.appendChild(r),this.globalData.defs.appendChild(l),e.of=r,e.ost=d,s.msElem=h,p}},IShapeElement.prototype.searchShapes=function(t,e,s,r,i,a){a=a||[];var o,l,h,n,p,d=[].concat(a),f=t.length-1,m=[],y=[];for(o=f;o>=0;o-=1)if("fl"==t[o].ty||"st"==t[o].ty||"gf"==t[o].ty||"gs"==t[o].ty){e[o]={},n={type:t[o].ty,d:"",ld:"",lvl:i,mdf:!1};var c=document.createElementNS(svgNS,"path");if(e[o].o=PropertyFactory.getProp(this,t[o].o,0,.01,r),("st"==t[o].ty||"gs"==t[o].ty)&&(c.setAttribute("stroke-linecap",this.lcEnum[t[o].lc]||"round"),c.setAttribute("stroke-linejoin",this.ljEnum[t[o].lj]||"round"),c.setAttribute("fill-opacity","0"),1==t[o].lj&&c.setAttribute("stroke-miterlimit",t[o].ml),e[o].w=PropertyFactory.getProp(this,t[o].w,0,null,r),t[o].d)){var u=PropertyFactory.getDashProp(this,t[o].d,"svg",r);u.k||(c.setAttribute("stroke-dasharray",u.dasharray),c.setAttribute("stroke-dashoffset",u.dashoffset)),e[o].d=u}if("fl"==t[o].ty||"st"==t[o].ty)e[o].c=PropertyFactory.getProp(this,t[o].c,1,255,r),s.appendChild(c);else{e[o].g=PropertyFactory.getGradientProp(this,t[o].g,r),2==t[o].t&&(e[o].h=PropertyFactory.getProp(this,t[o].h,1,.01,r),e[o].a=PropertyFactory.getProp(this,t[o].a,1,degToRads,r)),e[o].s=PropertyFactory.getProp(this,t[o].s,1,null,r),e[o].e=PropertyFactory.getProp(this,t[o].e,1,null,r),this.setGradientData(c,t[o],e[o],n);var g=this.setGradientOpacity(t[o],e[o],n);g&&c.setAttribute("mask","url(#"+g+")"),e[o].elem=c,s.appendChild(c)}t[o].ln&&c.setAttribute("id",t[o].ln),t[o].cl&&c.setAttribute("class",t[o].cl),n.pElem=c,this.stylesList.push(n),e[o].style=n,m.push(n)}else if("gr"==t[o].ty){e[o]={it:[]};var v=document.createElementNS(svgNS,"g");s.appendChild(v),e[o].gr=v,this.searchShapes(t[o].it,e[o].it,v,r,i+1,a)}else if("tr"==t[o].ty)e[o]={transform:{op:PropertyFactory.getProp(this,t[o].o,0,.01,r),mProps:PropertyFactory.getProp(this,t[o],2,null,r)},elements:[]},p=e[o].transform,d.push(p);else if("sh"==t[o].ty||"rc"==t[o].ty||"el"==t[o].ty||"sr"==t[o].ty){e[o]={elements:[],caches:[],styles:[],transformers:d,lStr:""};var S=4;for("rc"==t[o].ty?S=5:"el"==t[o].ty?S=6:"sr"==t[o].ty&&(S=7),e[o].sh=ShapePropertyFactory.getShapeProp(this,t[o],S,r),e[o].lvl=i,this.shapes.push(e[o].sh),this.addShapeToModifiers(e[o].sh),h=this.stylesList.length,l=0;l<h;l+=1)this.stylesList[l].closed||e[o].elements.push({ty:this.stylesList[l].type,st:this.stylesList[l]})}else if("tm"==t[o].ty||"rd"==t[o].ty||"ms"==t[o].ty){var b=ShapeModifiers.getModifier(t[o].ty);b.init(this,t[o],r),this.shapeModifiers.push(b),y.push(b),e[o]=b}for(f=m.length,o=0;o<f;o+=1)m[o].closed=!0;for(f=y.length,o=0;o<f;o+=1)y[o].closed=!0},IShapeElement.prototype.addShapeToModifiers=function(t){var e,s=this.shapeModifiers.length;for(e=0;e<s;e+=1)this.shapeModifiers[e].addShape(t)},IShapeElement.prototype.renderModifiers=function(){if(this.shapeModifiers.length){var t,e=this.shapes.length;for(t=0;t<e;t+=1)this.shapes[t].reset();for(e=this.shapeModifiers.length,t=e-1;t>=0;t-=1)this.shapeModifiers[t].processShapes(this.firstFrame)}},IShapeElement.prototype.renderFrame=function(t){var e=this._parent.renderFrame.call(this,t);return e===!1?void this.hide():(this.globalToLocal([0,0,0]),this.hidden&&(this.layerElement.style.display="block",this.hidden=!1),this.renderModifiers(),void this.renderShape(null,null,!0,null))},IShapeElement.prototype.hide=function(){if(!this.hidden){this.layerElement.style.display="none";var t,e=this.stylesList.length;for(t=e-1;t>=0;t-=1)"0"!==this.stylesList[t].ld&&(this.stylesList[t].ld="0",this.stylesList[t].pElem.style.display="none",this.stylesList[t].pElem.parentNode&&(this.stylesList[t].parent=this.stylesList[t].pElem.parentNode));this.hidden=!0}},IShapeElement.prototype.renderShape=function(t,e,s,r){var i,a;if(!t)for(t=this.shapesData,a=this.stylesList.length,i=0;i<a;i+=1)this.stylesList[i].d="",this.stylesList[i].mdf=!1;e||(e=this.viewData),a=t.length-1;var o;for(i=a;i>=0;i-=1)o=t[i].ty,"tr"==o?((this.firstFrame||e[i].transform.op.mdf&&r)&&r.setAttribute("opacity",e[i].transform.op.v),(this.firstFrame||e[i].transform.mProps.mdf&&r)&&r.setAttribute("transform",e[i].transform.mProps.v.to2dCSS())):"sh"==o||"el"==o||"rc"==o||"sr"==o?this.renderPath(t[i],e[i]):"fl"==o?this.renderFill(t[i],e[i]):"gf"==o?this.renderGradient(t[i],e[i]):"gs"==o?(this.renderGradient(t[i],e[i]),this.renderStroke(t[i],e[i])):"st"==o?this.renderStroke(t[i],e[i]):"gr"==o&&this.renderShape(t[i].it,e[i].it,!1,e[i].gr);if(s){for(a=this.stylesList.length,i=0;i<a;i+=1)"0"===this.stylesList[i].ld&&(this.stylesList[i].ld="1",this.stylesList[i].pElem.style.display="block"),(this.stylesList[i].mdf||this.firstFrame)&&(this.stylesList[i].pElem.setAttribute("d",this.stylesList[i].d),this.stylesList[i].msElem&&this.stylesList[i].msElem.setAttribute("d",this.stylesList[i].d));this.firstFrame&&(this.firstFrame=!1)}},IShapeElement.prototype.renderPath=function(t,e){var s,r,i,a,o,l,h,n,p=e.elements.length,d=e.lvl;for(n=0;n<p;n+=1){l=e.sh.mdf||this.firstFrame,o="";var f=e.sh.paths;if(a=f.length,e.elements[n].st.lvl<d){var m,y,c=this.mHelper.reset();for(y=e.transformers.length-1;y>=0;y-=1)l=e.transformers[y].mProps.mdf||l,m=e.transformers[y].mProps.v.props,c.transform(m[0],m[1],m[2],m[3],m[4],m[5],m[6],m[7],m[8],m[9],m[10],m[11],m[12],m[13],m[14],m[15]);if(l){for(i=0;i<a;i+=1)if(h=f[i],h&&h.v){for(s=h.v.length,r=1;r<s;r+=1)1==r&&(o+=" M"+c.applyToPointStringified(h.v[0][0],h.v[0][1])),o+=" C"+c.applyToPointStringified(h.o[r-1][0],h.o[r-1][1])+" "+c.applyToPointStringified(h.i[r][0],h.i[r][1])+" "+c.applyToPointStringified(h.v[r][0],h.v[r][1]);1==s&&(o+=" M"+c.applyToPointStringified(h.v[0][0],h.v[0][1])),h.c&&(o+=" C"+c.applyToPointStringified(h.o[r-1][0],h.o[r-1][1])+" "+c.applyToPointStringified(h.i[0][0],h.i[0][1])+" "+c.applyToPointStringified(h.v[0][0],h.v[0][1]),o+="z")}e.caches[n]=o}else o=e.caches[n]}else if(l){for(i=0;i<a;i+=1)if(h=f[i],h&&h.v){for(s=h.v.length,r=1;r<s;r+=1)1==r&&(o+=" M"+h.v[0].join(",")),o+=" C"+h.o[r-1].join(",")+" "+h.i[r].join(",")+" "+h.v[r].join(",");1==s&&(o+=" M"+h.v[0].join(",")),h.c&&s&&(o+=" C"+h.o[r-1].join(",")+" "+h.i[0].join(",")+" "+h.v[0].join(","),o+="z")}e.caches[n]=o}else o=e.caches[n];e.elements[n].st.d+=o,e.elements[n].st.mdf=l||e.elements[n].st.mdf}},IShapeElement.prototype.renderFill=function(t,e){var s=e.style;(e.c.mdf||this.firstFrame)&&s.pElem.setAttribute("fill","rgb("+bm_floor(e.c.v[0])+","+bm_floor(e.c.v[1])+","+bm_floor(e.c.v[2])+")"),(e.o.mdf||this.firstFrame)&&s.pElem.setAttribute("fill-opacity",e.o.v)},IShapeElement.prototype.renderGradient=function(t,e){var s=e.gf,r=e.of,i=e.s.v,a=e.e.v;if(e.o.mdf||this.firstFrame){var o="gf"===t.ty?"fill-opacity":"stroke-opacity";e.elem.setAttribute(o,e.o.v)}if(e.s.mdf||this.firstFrame){var l=1===t.t?"x1":"cx",h="x1"===l?"y1":"cy";s.setAttribute(l,i[0]),s.setAttribute(h,i[1]),r&&(r.setAttribute(l,i[0]),r.setAttribute(h,i[1]))}var n,p,d,f;if(e.g.cmdf||this.firstFrame){n=e.cst;var m=e.g.c;for(d=n.length,p=0;p<d;p+=1)f=n[p],f.setAttribute("offset",m[4*p]+"%"),f.setAttribute("stop-color","rgb("+m[4*p+1]+","+m[4*p+2]+","+m[4*p+3]+")")}if(r&&(e.g.omdf||this.firstFrame)){n=e.ost;var y=e.g.o;for(d=n.length,p=0;p<d;p+=1)f=n[p],f.setAttribute("offset",y[2*p]+"%"),f.setAttribute("stop-opacity",y[2*p+1])}if(1===t.t)(e.e.mdf||this.firstFrame)&&(s.setAttribute("x2",a[0]),s.setAttribute("y2",a[1]),r&&(r.setAttribute("x2",a[0]),r.setAttribute("y2",a[1])));else{var c;if((e.s.mdf||e.e.mdf||this.firstFrame)&&(c=Math.sqrt(Math.pow(i[0]-a[0],2)+Math.pow(i[1]-a[1],2)),s.setAttribute("r",c),r&&r.setAttribute("r",c)),e.e.mdf||e.h.mdf||e.a.mdf||this.firstFrame){c||(c=Math.sqrt(Math.pow(i[0]-a[0],2)+Math.pow(i[1]-a[1],2)));var u=Math.atan2(a[1]-i[1],a[0]-i[0]),g=e.h.v>=1?.99:e.h.v<=-1?-.99:e.h.v,v=c*g,S=Math.cos(u+e.a.v)*v+i[0],b=Math.sin(u+e.a.v)*v+i[1];s.setAttribute("fx",S),s.setAttribute("fy",b),r&&(r.setAttribute("fx",S),r.setAttribute("fy",b))}}},IShapeElement.prototype.renderStroke=function(t,e){var s=e.style,r=e.d;r&&r.k&&(r.mdf||this.firstFrame)&&(s.pElem.setAttribute("stroke-dasharray",r.dasharray),s.pElem.setAttribute("stroke-dashoffset",r.dashoffset)),e.c&&(e.c.mdf||this.firstFrame)&&s.pElem.setAttribute("stroke","rgb("+bm_floor(e.c.v[0])+","+bm_floor(e.c.v[1])+","+bm_floor(e.c.v[2])+")"),(e.o.mdf||this.firstFrame)&&s.pElem.setAttribute("stroke-opacity",e.o.v),(e.w.mdf||this.firstFrame)&&(s.pElem.setAttribute("stroke-width",e.w.v),s.msElem&&s.msElem.setAttribute("stroke-width",e.w.v))},IShapeElement.prototype.destroy=function(){this._parent.destroy.call(),this.shapeData=null,this.viewData=null,this.parentContainer=null,this.placeholder=null};