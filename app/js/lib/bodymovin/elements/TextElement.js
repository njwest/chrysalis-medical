function ITextElement(t,a,e,r){}ITextElement.prototype.init=function(){this._parent.init.call(this),this.lettersChangedFlag=!1,this.currentTextDocumentData={};var t=this.data;this.viewData={m:{a:PropertyFactory.getProp(this,t.t.m.a,1,0,this.dynamicProperties)}};var a=this.data.t;if(a.a.length){this.viewData.a=Array.apply(null,{length:a.a.length});var e,r,s,i=a.a.length;for(e=0;e<i;e+=1)s=a.a[e],r={a:{},s:{}},"r"in s.a&&(r.a.r=PropertyFactory.getProp(this,s.a.r,0,degToRads,this.dynamicProperties)),"rx"in s.a&&(r.a.rx=PropertyFactory.getProp(this,s.a.rx,0,degToRads,this.dynamicProperties)),"ry"in s.a&&(r.a.ry=PropertyFactory.getProp(this,s.a.ry,0,degToRads,this.dynamicProperties)),"sk"in s.a&&(r.a.sk=PropertyFactory.getProp(this,s.a.sk,0,degToRads,this.dynamicProperties)),"sa"in s.a&&(r.a.sa=PropertyFactory.getProp(this,s.a.sa,0,degToRads,this.dynamicProperties)),"s"in s.a&&(r.a.s=PropertyFactory.getProp(this,s.a.s,1,.01,this.dynamicProperties)),"a"in s.a&&(r.a.a=PropertyFactory.getProp(this,s.a.a,1,0,this.dynamicProperties)),"o"in s.a&&(r.a.o=PropertyFactory.getProp(this,s.a.o,0,.01,this.dynamicProperties)),"p"in s.a&&(r.a.p=PropertyFactory.getProp(this,s.a.p,1,0,this.dynamicProperties)),"sw"in s.a&&(r.a.sw=PropertyFactory.getProp(this,s.a.sw,0,0,this.dynamicProperties)),"sc"in s.a&&(r.a.sc=PropertyFactory.getProp(this,s.a.sc,1,0,this.dynamicProperties)),"fc"in s.a&&(r.a.fc=PropertyFactory.getProp(this,s.a.fc,1,0,this.dynamicProperties)),"fh"in s.a&&(r.a.fh=PropertyFactory.getProp(this,s.a.fh,0,0,this.dynamicProperties)),"fs"in s.a&&(r.a.fs=PropertyFactory.getProp(this,s.a.fs,0,.01,this.dynamicProperties)),"fb"in s.a&&(r.a.fb=PropertyFactory.getProp(this,s.a.fb,0,.01,this.dynamicProperties)),"t"in s.a&&(r.a.t=PropertyFactory.getProp(this,s.a.t,0,0,this.dynamicProperties)),r.s=PropertyFactory.getTextSelectorProp(this,s.s,this.dynamicProperties),r.s.t=s.s.t,this.viewData.a[e]=r}else this.viewData.a=[];a.p&&"m"in a.p?(this.viewData.p={f:PropertyFactory.getProp(this,a.p.f,0,0,this.dynamicProperties),l:PropertyFactory.getProp(this,a.p.l,0,0,this.dynamicProperties),r:a.p.r,m:this.maskManager.getMaskProperty(a.p.m)},this.maskPath=!0):this.maskPath=!1},ITextElement.prototype.prepareFrame=function(t){var a=0,e=this.data.t.d.k.length,r=this.data.t.d.k[a].s;for(a+=1;a<e&&!(this.data.t.d.k[a].t>t);)r=this.data.t.d.k[a].s,a+=1;this.lettersChangedFlag=!1,r!==this.currentTextDocumentData&&(this.currentTextDocumentData=r,this.lettersChangedFlag=!0,this.buildNewText()),this._parent.prepareFrame.call(this,t)},ITextElement.prototype.createPathShape=function(t,a){var e,r,s,i,n=a.length,o="";for(e=0;e<n;e+=1){for(s=a[e].ks.k.i.length,i=a[e].ks.k,r=1;r<s;r+=1)1==r&&(o+=" M"+t.applyToPointStringified(i.v[0][0],i.v[0][1])),o+=" C"+t.applyToPointStringified(i.o[r-1][0],i.o[r-1][1])+" "+t.applyToPointStringified(i.i[r][0],i.i[r][1])+" "+t.applyToPointStringified(i.v[r][0],i.v[r][1]);o+=" C"+t.applyToPointStringified(i.o[r-1][0],i.o[r-1][1])+" "+t.applyToPointStringified(i.i[0][0],i.i[0][1])+" "+t.applyToPointStringified(i.v[0][0],i.v[0][1]),o+="z"}return o},ITextElement.prototype.getMeasures=function(){var t,a,e,r,s=this.mHelper,i=this.renderType,n=this.data,o=this.currentTextDocumentData,p=o.l;if(this.maskPath){var h=this.viewData.p.m;if(!this.viewData.p.n||this.viewData.p.mdf){var l=h.v;this.viewData.p.r&&(l=reversePath(l));var g={tLength:0,segments:[]};r=l.v.length-1;var v,d=0;for(e=0;e<r;e+=1)v={s:l.v[e],e:l.v[e+1],to:[l.o[e][0]-l.v[e][0],l.o[e][1]-l.v[e][1]],ti:[l.i[e+1][0]-l.v[e+1][0],l.i[e+1][1]-l.v[e+1][1]]},bez.buildBezierData(v),g.tLength+=v.bezierData.segmentLength,g.segments.push(v),d+=v.bezierData.segmentLength;e=r,h.v.c&&(v={s:l.v[e],e:l.v[0],to:[l.o[e][0]-l.v[e][0],l.o[e][1]-l.v[e][1]],ti:[l.i[0][0]-l.v[0][0],l.i[0][1]-l.v[0][1]]},bez.buildBezierData(v),g.tLength+=v.bezierData.segmentLength,g.segments.push(v),d+=v.bezierData.segmentLength),this.viewData.p.pi=g}var c,y,P,g=this.viewData.p.pi,f=this.viewData.p.f.v,m=0,u=1,k=0,D=!0,T=g.segments;if(f<0&&h.v.c)for(g.tLength<Math.abs(f)&&(f=-Math.abs(f)%g.tLength),m=T.length-1,P=T[m].bezierData.points,u=P.length-1;f<0;)f+=P[u].partialLength,u-=1,u<0&&(m-=1,P=T[m].bezierData.points,u=P.length-1);P=T[m].bezierData.points,y=P[u-1],c=P[u];var w,F,b=c.partialLength}r=p.length,t=0,a=0;var x,M,C,L,z,S=1.2*o.s*.714,I=!0,A=this.viewData,R=Array.apply(null,{length:r});L=A.a.length;var B,W,E,G,j,H,O,X,Y,Z,_,N,q,J,K,Q,U=-1,V=f,$=m,tt=u,at=-1,et=0;for(e=0;e<r;e+=1)if(s.reset(),H=1,p[e].n)t=0,a+=o.yOffset,a+=I?1:0,f=V,I=!1,et=0,this.maskPath&&(m=$,u=tt,P=T[m].bezierData.points,y=P[u-1],c=P[u],b=c.partialLength,k=0),R[e]=this.emptyProp;else{if(this.maskPath){if(at!==p[e].line){switch(o.j){case 1:f+=d-o.lineWidths[p[e].line];break;case 2:f+=(d-o.lineWidths[p[e].line])/2}at=p[e].line}U!==p[e].ind&&(p[U]&&(f+=p[U].extra),f+=p[e].an/2,U=p[e].ind),f+=A.m.a.v[0]*p[e].an/200;var rt=0;for(C=0;C<L;C+=1)x=A.a[C].a,"p"in x&&(M=A.a[C].s,W=M.getMult(p[e].anIndexes[C],n.t.a[C].s.totalChars),rt+=W.length?x.p.v[0]*W[0]:x.p.v[0]*W);for(D=!0;D;)k+b>=f+rt||!P?(w=(f+rt-k)/c.partialLength,G=y.point[0]+(c.point[0]-y.point[0])*w,j=y.point[1]+(c.point[1]-y.point[1])*w,s.translate(0,-(A.m.a.v[1]*S/100)+a),D=!1):P&&(k+=c.partialLength,u+=1,u>=P.length&&(u=0,m+=1,T[m]?P=T[m].bezierData.points:h.v.c?(u=0,m=0,P=T[m].bezierData.points):(k-=c.partialLength,P=null)),P&&(y=c,c=P[u],b=c.partialLength));E=p[e].an/2-p[e].add,s.translate(-E,0,0)}else E=p[e].an/2-p[e].add,s.translate(-E,0,0),s.translate(-A.m.a.v[0]*p[e].an/200,-A.m.a.v[1]*S/100,0);for(et+=p[e].l/2,C=0;C<L;C+=1)x=A.a[C].a,"t"in x&&(M=A.a[C].s,W=M.getMult(p[e].anIndexes[C],n.t.a[C].s.totalChars),this.maskPath?f+=W.length?x.t*W[0]:x.t*W:t+=W.length?x.t.v*W[0]:x.t.v*W);for(et+=p[e].l/2,o.strokeWidthAnim&&(X=o.sw||0),o.strokeColorAnim&&(O=o.sc?[o.sc[0],o.sc[1],o.sc[2]]:[0,0,0]),o.fillColorAnim&&(Y=[o.fc[0],o.fc[1],o.fc[2]]),C=0;C<L;C+=1)x=A.a[C].a,"a"in x&&(M=A.a[C].s,W=M.getMult(p[e].anIndexes[C],n.t.a[C].s.totalChars),W.length?s.translate(-x.a.v[0]*W[0],-x.a.v[1]*W[1],x.a.v[2]*W[2]):s.translate(-x.a.v[0]*W,-x.a.v[1]*W,x.a.v[2]*W));for(C=0;C<L;C+=1)x=A.a[C].a,"s"in x&&(M=A.a[C].s,W=M.getMult(p[e].anIndexes[C],n.t.a[C].s.totalChars),W.length?s.scale(1+(x.s.v[0]-1)*W[0],1+(x.s.v[1]-1)*W[1],1):s.scale(1+(x.s.v[0]-1)*W,1+(x.s.v[1]-1)*W,1));for(C=0;C<L;C+=1){if(x=A.a[C].a,M=A.a[C].s,W=M.getMult(p[e].anIndexes[C],n.t.a[C].s.totalChars),"sk"in x&&(W.length?s.skewFromAxis(-x.sk.v*W[0],x.sa.v*W[1]):s.skewFromAxis(-x.sk.v*W,x.sa.v*W)),"r"in x&&(W.length?s.rotateZ(-x.r.v*W[2]):s.rotateZ(-x.r.v*W)),"ry"in x&&(W.length?s.rotateY(x.ry.v*W[1]):s.rotateY(x.ry.v*W)),"rx"in x&&(W.length?s.rotateX(x.rx.v*W[0]):s.rotateX(x.rx.v*W)),"o"in x&&(H+=W.length?(x.o.v*W[0]-H)*W[0]:(x.o.v*W-H)*W),o.strokeWidthAnim&&"sw"in x&&(X+=W.length?x.sw.v*W[0]:x.sw.v*W),o.strokeColorAnim&&"sc"in x)for(Z=0;Z<3;Z+=1)W.length?O[Z]=Math.round(255*(O[Z]+(x.sc.v[Z]-O[Z])*W[0])):O[Z]=Math.round(255*(O[Z]+(x.sc.v[Z]-O[Z])*W));if(o.fillColorAnim){if("fc"in x)for(Z=0;Z<3;Z+=1)W.length?Y[Z]=Y[Z]+(x.fc.v[Z]-Y[Z])*W[0]:Y[Z]=Y[Z]+(x.fc.v[Z]-Y[Z])*W;"fh"in x&&(Y=W.length?addHueToRGB(Y,x.fh.v*W[0]):addHueToRGB(Y,x.fh.v*W)),"fs"in x&&(Y=W.length?addSaturationToRGB(Y,x.fs.v*W[0]):addSaturationToRGB(Y,x.fs.v*W)),"fb"in x&&(Y=W.length?addBrightnessToRGB(Y,x.fb.v*W[0]):addBrightnessToRGB(Y,x.fb.v*W))}}for(C=0;C<L;C+=1)x=A.a[C].a,"p"in x&&(M=A.a[C].s,W=M.getMult(p[e].anIndexes[C],n.t.a[C].s.totalChars),this.maskPath?W.length?s.translate(0,x.p.v[1]*W[0],-x.p.v[2]*W[1]):s.translate(0,x.p.v[1]*W,-x.p.v[2]*W):W.length?s.translate(x.p.v[0]*W[0],x.p.v[1]*W[1],-x.p.v[2]*W[2]):s.translate(x.p.v[0]*W,x.p.v[1]*W,-x.p.v[2]*W));if(o.strokeWidthAnim&&(_=X<0?0:X),o.strokeColorAnim&&(N="rgb("+Math.round(255*O[0])+","+Math.round(255*O[1])+","+Math.round(255*O[2])+")"),o.fillColorAnim&&(q="rgb("+Math.round(255*Y[0])+","+Math.round(255*Y[1])+","+Math.round(255*Y[2])+")"),this.maskPath){if(n.t.p.p){F=(c.point[1]-y.point[1])/(c.point[0]-y.point[0]);var st=180*Math.atan(F)/Math.PI;c.point[0]<y.point[0]&&(st+=180),s.rotate(-st*Math.PI/180)}s.translate(G,j,0),s.translate(A.m.a.v[0]*p[e].an/200,A.m.a.v[1]*S/100,0),f-=A.m.a.v[0]*p[e].an/200,p[e+1]&&U!==p[e+1].ind&&(f+=p[e].an/2,f+=o.tr/1e3*o.s)}else{switch(s.translate(t,a,0),o.ps&&s.translate(o.ps[0],o.ps[1]+o.ascent,0),o.j){case 1:s.translate(o.justifyOffset+(o.boxWidth-o.lineWidths[p[e].line]),0,0);break;case 2:s.translate(o.justifyOffset+(o.boxWidth-o.lineWidths[p[e].line])/2,0,0)}s.translate(E,0,0),s.translate(A.m.a.v[0]*p[e].an/200,A.m.a.v[1]*S/100,0),t+=p[e].l+o.tr/1e3*o.s}"html"===i?J=s.toCSS():"svg"===i?J=s.to2dCSS():K=[s.props[0],s.props[1],s.props[2],s.props[3],s.props[4],s.props[5],s.props[6],s.props[7],s.props[8],s.props[9],s.props[10],s.props[11],s.props[12],s.props[13],s.props[14],s.props[15]],Q=H,B=this.renderedLetters[e],!B||B.o===Q&&B.sw===_&&B.sc===N&&B.fc===q?"svg"!==i&&"html"!==i||B&&B.m===J?"canvas"!==i||B&&B.props[0]===K[0]&&B.props[1]===K[1]&&B.props[4]===K[4]&&B.props[5]===K[5]&&B.props[12]===K[12]&&B.props[13]===K[13]?z=B:(this.lettersChangedFlag=!0,z=new LetterProps(Q,_,N,q,null,K)):(this.lettersChangedFlag=!0,z=new LetterProps(Q,_,N,q,J)):(this.lettersChangedFlag=!0,z=new LetterProps(Q,_,N,q,J,K)),this.renderedLetters[e]=z}},ITextElement.prototype.emptyProp=new LetterProps;