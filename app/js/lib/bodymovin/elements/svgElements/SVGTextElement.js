function SVGTextElement(t,e,s,a,r){this.textSpans=[],this.renderType="svg",this._parent.constructor.call(this,t,e,s,a,r)}createElement(SVGBaseElement,SVGTextElement),SVGTextElement.prototype.init=ITextElement.prototype.init,SVGTextElement.prototype.createPathShape=ITextElement.prototype.createPathShape,SVGTextElement.prototype.getMeasures=ITextElement.prototype.getMeasures,SVGTextElement.prototype.prepareFrame=ITextElement.prototype.prepareFrame,SVGTextElement.prototype.createElements=function(){this._parent.createElements.call(this),this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl)},SVGTextElement.prototype.buildNewText=function(){var t,e,s=this.currentTextDocumentData;this.renderedLetters=Array.apply(null,{length:this.currentTextDocumentData.l?this.currentTextDocumentData.l.length:0}),s.fc?this.layerElement.setAttribute("fill","rgb("+Math.round(255*s.fc[0])+","+Math.round(255*s.fc[1])+","+Math.round(255*s.fc[2])+")"):this.layerElement.setAttribute("fill","rgba(0,0,0,0)"),s.sc&&(this.layerElement.setAttribute("stroke","rgb("+Math.round(255*s.sc[0])+","+Math.round(255*s.sc[1])+","+Math.round(255*s.sc[2])+")"),this.layerElement.setAttribute("stroke-width",s.sw)),this.layerElement.setAttribute("font-size",s.s);var a=this.globalData.fontManager.getFontByName(s.f);if(a.fClass)this.layerElement.setAttribute("class",a.fClass);else{this.layerElement.setAttribute("font-family",a.fFamily);var r=s.fWeight,i=s.fStyle;this.layerElement.setAttribute("font-style",i),this.layerElement.setAttribute("font-weight",r)}var n=s.l||[];if(e=n.length){var l,h,o=this.mHelper,p="",m=this.data.singleShape;if(m)var c=0,f=0,u=s.lineWidths,d=s.boxWidth,y=!0;var S=0;for(t=0;t<e;t+=1){if(this.globalData.fontManager.chars?m&&0!==t||(l=this.textSpans[S]?this.textSpans[S]:document.createElementNS(svgNS,"path")):l=this.textSpans[S]?this.textSpans[S]:document.createElementNS(svgNS,"text"),l.style.display="inherit",l.setAttribute("stroke-linecap","butt"),l.setAttribute("stroke-linejoin","round"),l.setAttribute("stroke-miterlimit","4"),m&&n[t].n&&(c=0,f+=s.yOffset,f+=y?1:0,y=!1),o.reset(),this.globalData.fontManager.chars&&o.scale(s.s/100,s.s/100),m){switch(s.ps&&o.translate(s.ps[0],s.ps[1]+s.ascent,0),s.j){case 1:o.translate(s.justifyOffset+(d-u[n[t].line]),0,0);break;case 2:o.translate(s.justifyOffset+(d-u[n[t].line])/2,0,0)}o.translate(c,f,0)}if(this.globalData.fontManager.chars){var b,g=this.globalData.fontManager.getCharData(s.t.charAt(t),a.fStyle,this.globalData.fontManager.getFontByName(s.f).fFamily);b=g?g.data:null,b&&b.shapes&&(h=b.shapes[0].it,m||(p=""),p+=this.createPathShape(o,h),m||l.setAttribute("d",p)),m||this.layerElement.appendChild(l)}else l.textContent=n[t].val,l.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),this.layerElement.appendChild(l),m&&l.setAttribute("transform",o.to2dCSS());m&&(c+=n[t].l,c+=s.tr/1e3*s.s),this.textSpans[S]=l,S+=1}for(;S<this.textSpans.length;)this.textSpans[S].style.display="none",S+=1;m&&this.globalData.fontManager.chars&&(l.setAttribute("d",p),this.layerElement.appendChild(l))}},SVGTextElement.prototype.hide=function(){this.hidden||(this.layerElement.style.display="none",this.hidden=!0)},SVGTextElement.prototype.renderFrame=function(t){var e=this._parent.renderFrame.call(this,t);if(e===!1)return void this.hide();if(this.hidden&&(this.hidden=!1,this.layerElement.style.display="block"),!this.data.singleShape&&(this.getMeasures(),this.lettersChangedFlag)){var s,a,r=this.renderedLetters,i=this.currentTextDocumentData.l;a=i.length;var n;for(s=0;s<a;s+=1)i[s].n||(n=r[s],this.textSpans[s].setAttribute("transform",n.m),this.textSpans[s].setAttribute("opacity",n.o),n.sw&&this.textSpans[s].setAttribute("stroke-width",n.sw),n.sc&&this.textSpans[s].setAttribute("stroke",n.sc),n.fc&&this.textSpans[s].setAttribute("fill",n.fc));this.firstFrame&&(this.firstFrame=!1)}},SVGTextElement.prototype.destroy=function(){this._parent.destroy.call()};