function ShapeItemElement(t,e,s,i,l,r){this.shape=e,this.parentContainer=s,this.placeholder=i,this.lcEnum={1:"butt",2:"round",3:"butt"},this.ljEnum={1:"miter",2:"round",3:"bevel"},this.stylesList=[],this.viewData=[],this.elemData=t,this.data=t.shapes,this.globalData=r,this.firstFrame=!0,this.searchShapes(this.data,this.viewData,l,[]),styleUnselectableDiv(this.shape)}ShapeItemElement.prototype.appendNodeToParent=SVGBaseElement.prototype.appendNodeToParent,ShapeItemElement.prototype.searchShapes=function(t,e,s,i){var l,r,a,o=t.length-1,h=[],p=[];for(l=o;l>=0;l-=1)if("fl"==t[l].ty||"st"==t[l].ty){e[l]={};var n;if(e[l].c=PropertyFactory.getProp(this.elemData,t[l].c,1,null,s),e[l].o=PropertyFactory.getProp(this.elemData,t[l].o,0,.01,s),"st"==t[l].ty){if(n=document.createElementNS(svgNS,"g"),n.style.strokeLinecap=this.lcEnum[t[l].lc]||"round",n.style.strokeLinejoin=this.ljEnum[t[l].lj]||"round",n.style.fillOpacity=0,1==t[l].lj&&(n.style.strokeMiterlimit=t[l].ml),e[l].c.k||(n.style.stroke="rgb("+e[l].c.v[0]+","+e[l].c.v[1]+","+e[l].c.v[2]+")"),e[l].o.k||(n.style.strokeOpacity=e[l].o.v),e[l].w=PropertyFactory.getProp(this.elemData,t[l].w,0,null,s),e[l].w.k||(n.style.strokeWidth=e[l].w.v),t[l].d){var m=PropertyFactory.getDashProp(this.elemData,t[l].d,"svg",s);m.k?e[l].d=m:(n.style.strokeDasharray=m.dasharray,n.style.strokeDashoffset=m.dashoffset)}}else n=document.createElementNS(svgNS,"path"),e[l].c.k||(n.style.fill="rgb("+e[l].c.v[0]+","+e[l].c.v[1]+","+e[l].c.v[2]+")"),e[l].o.k||(n.style.fillOpacity=e[l].o.v);this.shape===this.parentContainer?this.appendNodeToParent(n):this.shape.appendChild(n),this.stylesList.push({pathElement:n,type:t[l].ty,d:"",ld:"",mdf:!1}),e[l].style=this.stylesList[this.stylesList.length-1],h.push(e[l].style)}else if("gr"==t[l].ty)e[l]={it:[]},this.searchShapes(t[l].it,e[l].it,s,i);else if("tr"==t[l].ty)e[l]={transform:{mat:new Matrix,opacity:1,matMdf:!1,opMdf:!1,op:PropertyFactory.getProp(this.elemData,t[l].o,0,.01,s),mProps:PropertyFactory.getProp(this.elemData,t[l],2,null,s)},elements:[]};else if("sh"==t[l].ty||"rc"==t[l].ty||"el"==t[l].ty){e[l]={elements:[],styles:[],lStr:""};var y=4;"rc"==t[l].ty?y=5:"el"==t[l].ty&&(y=6),e[l].sh=PropertyFactory.getShapeProp(this.elemData,t[l],y,s,i),a=this.stylesList.length;var f,d=!1,c=!1;for(r=0;r<a;r+=1)this.stylesList[r].closed||("st"===this.stylesList[r].type?(d=!0,f=document.createElementNS(svgNS,"path"),this.stylesList[r].pathElement.appendChild(f),e[l].elements.push({ty:this.stylesList[r].type,el:f})):(c=!0,e[l].elements.push({ty:this.stylesList[r].type,st:this.stylesList[r]})));e[l].st=d,e[l].fl=c}else if("tm"==t[l].ty){var v={closed:!1,trimProp:PropertyFactory.getProp(this.elemData,t[l],7,null,s)};i.push(v),p.push(v)}for(o=h.length,l=0;l<o;l+=1)h[l].closed=!0;for(o=p.length,l=0;l<o;l+=1)p[l].closed=!0},ShapeItemElement.prototype.getElement=function(){return this.shape},ShapeItemElement.prototype.hideShape=function(){var t,e=this.stylesList.length;for(t=e-1;t>=0;t-=1)"0"!==this.stylesList[t].ld&&(this.stylesList[t].ld="0",this.stylesList[t].pathElement.style.display="none",this.stylesList[t].pathElement.parentNode&&(this.stylesList[t].parent=this.stylesList[t].pathElement.parentNode))},ShapeItemElement.prototype.renderShape=function(t,e,s,i){var l,r;if(!e)for(e=this.data,r=this.stylesList.length,l=0;l<r;l+=1)this.stylesList[l].d="",this.stylesList[l].mdf=!1;s||(s=this.viewData),r=e.length-1;var a,o;for(a=t,l=r;l>=0;l-=1)if("tr"==e[l].ty){a=s[l].transform;var h=s[l].transform.mProps.v.props;if(a.matMdf=a.mProps.mdf,a.opMdf=a.op.mdf,o=a.mat,o.reset(),t){var p=t.mat.props;a.opacity=t.opacity,a.opacity*=s[l].transform.op.v,a.matMdf=!!t.matMdf||a.matMdf,a.opMdf=!!t.opMdf||a.opMdf,o.transform(p[0],p[1],p[2],p[3],p[4],p[5])}else a.opacity=a.op.o;o.transform(h[0],h[1],h[2],h[3],h[4],h[5])}else"sh"==e[l].ty||"el"==e[l].ty||"rc"==e[l].ty?this.renderPath(e[l],s[l],a):"fl"==e[l].ty?this.renderFill(e[l],s[l],a):"st"==e[l].ty?this.renderStroke(e[l],s[l],a):"gr"==e[l].ty?this.renderShape(a,e[l].it,s[l].it):"tm"==e[l].ty;if(i){for(r=this.stylesList.length,l=0;l<r;l+=1)"0"===this.stylesList[l].ld&&(this.stylesList[l].ld="1",this.stylesList[l].pathElement.style.display="block"),"fl"===this.stylesList[l].type&&(this.stylesList[l].mdf||this.firstFrame)&&this.stylesList[l].pathElement.setAttribute("d",this.stylesList[l].d);this.firstFrame&&(this.firstFrame=!1)}},ShapeItemElement.prototype.renderPath=function(t,e,s){var i,l,r=e.sh.v,a="",o="",h="";if(r.v){i=r.v.length;var p=s.matMdf||e.sh.mdf||this.firstFrame;if(p){var n=r.s?r.s:[];for(l=1;l<i;l+=1)n[l-1]?(e.st&&(h+=" M"+n[l-1][0]+","+n[l-1][1]),e.fl&&(o+=" M"+s.mat.applyToPointStringified(n[l-1][0],n[l-1][1]))):1==l&&(e.st&&(h+=" M"+r.v[0][0]+","+r.v[0][1]),e.fl&&(o+=" M"+s.mat.applyToPointStringified(r.v[0][0],r.v[0][1]))),e.st&&(h+=" C"+r.o[l-1][0]+","+r.o[l-1][1]+" "+r.i[l][0]+","+r.i[l][1]+" "+r.v[l][0]+","+r.v[l][1]),e.fl&&(o+=" C"+s.mat.applyToPointStringified(r.o[l-1][0],r.o[l-1][1])+" "+s.mat.applyToPointStringified(r.i[l][0],r.i[l][1])+" "+s.mat.applyToPointStringified(r.v[l][0],r.v[l][1]));1==i&&(n[0]?(e.st&&(h+=" M"+n[0][0]+","+n[0][1]),e.fl&&(o+=" M"+s.mat.applyToPointStringified(n[0][0],n[0][1]))):(e.st&&(h+=" M"+r.v[0][0]+","+r.v[0][1]),e.fl&&(o+=" M"+s.mat.applyToPointStringified(r.v[0][0],r.v[0][1])))),i&&t.closed&&(!t.trimmed||r.c)&&(e.st&&(h+=" C"+r.o[l-1][0]+","+r.o[l-1][1]+" "+r.i[0][0]+","+r.i[0][1]+" "+r.v[0][0]+","+r.v[0][1]),e.fl&&(o+=" C"+s.mat.applyToPointStringified(r.o[l-1][0],r.o[l-1][1])+" "+s.mat.applyToPointStringified(r.i[0][0],r.i[0][1])+" "+s.mat.applyToPointStringified(r.v[0][0],r.v[0][1]))),e.st&&(a="matrix("+s.mat.props.join(",")+")"),e.lStr=o}else o=e.lStr;for(i=e.elements.length,l=0;l<i;l+=1)"st"===e.elements[l].ty?((e.sh.mdf||this.firstFrame)&&e.elements[l].el.setAttribute("d",h),(s.matMdf||this.firstFrame)&&e.elements[l].el.setAttribute("transform",a)):(e.elements[l].st.mdf=!!p||e.elements[l].st.mdf,e.elements[l].st.d+=o)}},ShapeItemElement.prototype.renderFill=function(t,e,s){var i=e.style;(e.c.mdf||this.firstFrame)&&(i.pathElement.style.fill="rgb("+bm_floor(e.c.v[0])+","+bm_floor(e.c.v[1])+","+bm_floor(e.c.v[2])+")"),(e.o.mdf||s.opMdf||this.firstFrame)&&(i.pathElement.style.fillOpacity=e.o.v*s.opacity)},ShapeItemElement.prototype.renderStroke=function(t,e,s){var i=e.style,l=e.d;l&&(l.mdf||this.firstFrame)&&(i.pathElement.style.strokeDasharray=l.dasharray,i.pathElement.style.strokeDashoffset=l.dashoffset),(e.c.mdf||this.firstFrame)&&(i.pathElement.style.stroke="rgb("+bm_floor(e.c.v[0])+","+bm_floor(e.c.v[1])+","+bm_floor(e.c.v[2])+")"),(e.o.mdf||s.opMdf||this.firstFrame)&&(i.pathElement.style.strokeOpacity=e.o.v*s.opacity),(e.w.mdf||this.firstFrame)&&(i.pathElement.style.strokeWidth=e.w.v)},ShapeItemElement.prototype.destroy=function(t,e){this.shape=null,this.data=null,this.viewData=null,this.parentContainer=null,this.placeholder=null};