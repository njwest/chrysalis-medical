function RoundCornersModifier(){}extendPrototype(ShapeModifier,RoundCornersModifier),RoundCornersModifier.prototype.processKeys=function(e){if(this.elem.globalData.frameId!==this.frameId||e){this.mdf=!!e,this.frameId=this.elem.globalData.frameId;var r,s=this.dynamicProperties.length;for(r=0;r<s;r+=1)this.dynamicProperties[r].getValue(),this.dynamicProperties[r].mdf&&(this.mdf=!0)}},RoundCornersModifier.prototype.initModifierProperties=function(e,r){this.getValue=this.processKeys,this.rd=PropertyFactory.getProp(e,r.r,0,null,this.dynamicProperties),this.dynamicProperties.length||this.getValue(!0)},RoundCornersModifier.prototype.processPath=function(e,r){var s,t,o,i,h,p,n,a,d,f,u=e.v.length,m=[],c=[],l=[];for(s=0;s<u;s+=1)t=e.v[s],i=e.o[s],o=e.i[s],t[0]===i[0]&&t[1]===i[1]&&t[0]===o[0]&&t[1]===o[1]?0!==s&&s!==u-1||e.c?(h=0===s?e.v[u-1]:e.v[s-1],d=Math.sqrt(Math.pow(t[0]-h[0],2)+Math.pow(t[1]-h[1],2)),f=d?Math.min(d/2,r)/d:0,p=[t[0]+(h[0]-t[0])*f,t[1]-(t[1]-h[1])*f],a=p,n=[p[0]-(p[0]-t[0])*roundCorner,p[1]-(p[1]-t[1])*roundCorner],m.push(p),c.push(n),l.push(a),h=s===u-1?e.v[0]:e.v[s+1],d=Math.sqrt(Math.pow(t[0]-h[0],2)+Math.pow(t[1]-h[1],2)),f=d?Math.min(d/2,r)/d:0,p=[t[0]+(h[0]-t[0])*f,t[1]+(h[1]-t[1])*f],a=[p[0]-(p[0]-t[0])*roundCorner,p[1]-(p[1]-t[1])*roundCorner],n=p,m.push(p),c.push(n),l.push(a)):(m.push(t),c.push(i),l.push(o)):(m.push(e.v[s]),c.push(e.o[s]),l.push(e.i[s]));return{v:m,o:c,i:l,c:e.c}},RoundCornersModifier.prototype.processShapes=function(){var e,r,s,t,o=this.shapes.length,i=this.rd.v;if(0!==i){var h,p;for(r=0;r<o;r+=1)if(p=[],h=this.shapes[r],h.shape.mdf||this.mdf){for(h.shape.mdf=!0,e=h.shape.paths,t=e.length,s=0;s<t;s+=1)p.push(this.processPath(e[s],i));h.shape.paths=p,h.last=p}else h.shape.paths=h.last}this.dynamicProperties.length||(this.mdf=!1)},ShapeModifiers.registerModifier("rd",RoundCornersModifier);