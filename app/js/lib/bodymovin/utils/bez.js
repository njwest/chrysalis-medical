function bezFunction(){function n(n,t,e,r,o,i){var a=n*r+t*o+e*i-o*r-i*n-e*t;return a>-1e-4&&a<1e-4}function t(t,e,r,o,i,a,u,p,h){return n(t,e,o,i,u,p)&&n(t,r,o,a,u,h)}function e(n){this.segmentLength=0,this.points=new Array(n)}function r(n,t){this.partialLength=n,this.point=t}function o(n,t){var e=t.segments,r=e.length,o=bm_floor((r-1)*n),i=n*t.addedLength,a=0;if(i==e[o].l)return e[o].p;for(var u=e[o].l>i?-1:1,p=!0;p;)e[o].l<=i&&e[o+1].l>i?(a=(i-e[o].l)/(e[o+1].l-e[o].l),p=!1):o+=u,(o<0||o>=r-1)&&(p=!1);return e[o].p+(e[o+1].p-e[o].p)*a}function i(){this.pt1=new Array(2),this.pt2=new Array(2),this.pt3=new Array(2),this.pt4=new Array(2)}function a(n,t,e,r,a,u,p){var h=new i;a=a<0?0:a>1?1:a;var s=o(a,p);u=u>1?1:u;var l,f=o(u,p),g=n.length,m=1-s,w=1-f;for(l=0;l<g;l+=1)h.pt1[l]=Math.round(1e3*(m*m*m*n[l]+(s*m*m+m*s*m+m*m*s)*e[l]+(s*s*m+m*s*s+s*m*s)*r[l]+s*s*s*t[l]))/1e3,h.pt3[l]=Math.round(1e3*(m*m*w*n[l]+(s*m*w+m*s*w+m*m*f)*e[l]+(s*s*w+m*s*f+s*m*f)*r[l]+s*s*f*t[l]))/1e3,h.pt4[l]=Math.round(1e3*(m*w*w*n[l]+(s*w*w+m*f*w+m*w*f)*e[l]+(s*f*w+m*f*f+s*w*f)*r[l]+s*f*f*t[l]))/1e3,h.pt2[l]=Math.round(1e3*(w*w*w*n[l]+(f*w*w+w*f*w+w*w*f)*e[l]+(f*f*w+w*f*f+f*w*f)*r[l]+f*f*f*t[l]))/1e3;return h}var u=(Math,function(){function n(n,t){this.l=n,this.p=t}return function(t,e,r,o){var i,a,u,p,h,s,l=defaultCurveSegments,f=0,g=[],m=[],w={addedLength:0,segments:[]};for(u=r.length,i=0;i<l;i+=1){for(h=i/(l-1),s=0,a=0;a<u;a+=1)p=bm_pow(1-h,3)*t[a]+3*bm_pow(1-h,2)*h*r[a]+3*(1-h)*bm_pow(h,2)*o[a]+bm_pow(h,3)*e[a],g[a]=p,null!==m[a]&&(s+=bm_pow(g[a]-m[a],2)),m[a]=g[a];s&&(s=bm_sqrt(s),f+=s),w.segments.push(new n(f,h))}return w.addedLength=f,w}}()),p=function(){var t={};return function(o){var i=o.s,a=o.e,u=o.to,p=o.ti,h=(i.join("_")+"_"+a.join("_")+"_"+u.join("_")+"_"+p.join("_")).replace(/\./g,"p");if(t[h])return void(o.bezierData=t[h]);var s,l,f,g,m,w,_,b=defaultCurveSegments,d=0,c=null;2===i.length&&(i[0]!=a[0]||i[1]!=a[1])&&n(i[0],i[1],a[0],a[1],i[0]+u[0],i[1]+u[1])&&n(i[0],i[1],a[0],a[1],a[0]+p[0],a[1]+p[1])&&(b=2);var v=new e(b);for(f=u.length,s=0;s<b;s+=1){for(_=new Array(f),m=s/(b-1),w=0,l=0;l<f;l+=1)g=bm_pow(1-m,3)*i[l]+3*bm_pow(1-m,2)*m*(i[l]+u[l])+3*(1-m)*bm_pow(m,2)*(a[l]+p[l])+bm_pow(m,3)*a[l],_[l]=g,null!==c&&(w+=bm_pow(_[l]-c[l],2));w=bm_sqrt(w),d+=w,v.points[s]=new r(w,_),c=_}v.segmentLength=d,o.bezierData=v,t[h]=v}}();return{getBezierLength:u,getNewSegment:a,buildBezierData:p,pointOnLine2D:n,pointOnLine3D:t}}var bez=bezFunction();